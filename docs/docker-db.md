# Docker PgSQL

To use PostgreSQL running up to a container, use the following command

```
docker run --name djangoDb -e POSTGRES_PASSWORD=adminsecretpassword -d -p 5432:5432 postgres
```

Before that, is necessary that you use migration settings.

## Configuring the PostgreSQL at Django App

To configure the PostgreSQL container running at docker communicating with the python application, is necessary some configurations

Is necessary install the environment library to securely store our env informations.

Run:
```
pip install django-environ
```

At `django_project` create a `.env` file and paste this configs:
```
SECRET_KEY='django-insecure-sqh2wjh&ouodu=9*mij96fb9*(g&w-!_z4y_+y##&=-_7n5^2x'
DB_NAME=djangodb
DB_USER=postgres
DB_PASSWORD=adminsecretpassword
DB_HOST=localhost
DB_PORT=5432
```

The `SECRET_KEY` is generated by django framework.

So, at the `settings.py` at django_project update the following informations:

```
import environ
env = environ.Env()
environ.Env.read_env()
...
# Your secret key
SECRET_KEY = env("SECRET_KEY")
...
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql_psycopg2',
        'NAME': env("DB_NAME"),
        'USER': env("DB_USER"),
        'PASSWORD': env("DB_PASSWORD"),
        'HOST': env("DB_HOST"),
        'PORT': env("DB_PORT"),
    }
}
```

And, before that run migrations, is necessary install the pgsql library for integrate application:

```
pip install psycopg2
```

And to finish, after creating the models, is necessary to run migration using following commands:

```
python manage.py makemigrations
python manage.py migrate
```

Fonte: [Medium - stackpython](https://stackpython.medium.com/how-to-start-django-project-with-a-database-postgresql-aaa1d74659d8)